<!DOCTYPE html>
<html>
<head>
  <title>Your Chatbot Page</title>
  <!-- Include jQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <!-- Optional: Style for link bubble -->
  <style>
    .link-bubble {
      background-color: #f1f1f1;
      padding: 10px;
      border-radius: 5px;
      display: inline-block;
    }
  </style>
</head>
<body>
  <!-- Your content here -->

  <!-- Botpress Scripts -->
  <script src="https://cdn.botpress.cloud/webchat/v0/inject.js"></script>
  <script src="https://mediafiles.botpress.cloud/0424fb08-e9bf-4780-b3b7-566595200794/webchat/config.js" defer></script>

  <!-- Custom Script for DOM Manipulation -->
  <script>
    $(document).ready(function() {
      // Function to observe chat for changes
      function observeChat() {
        const chatElement = document.querySelector('.bpw-chat');
        if (chatElement) {
          const observer = new MutationObserver(function() {
            $(".bpw-message-text").each(function() {
              var html = $(this).html();
              var urlRegex = /(https?:\/\/[^\s]+)/g;
              $(this).html(html.replace(urlRegex, '<div class="link-bubble">$1</div>'));
            });
          });

          observer.observe(chatElement, {
            attributes: true,
            childList: true,
            subtree: true
          });
        } else {
          // Retry if chat is not yet loaded
          setTimeout(observeChat, 1000);
        }
      }
      
      // Start observing the chat
      observeChat();
    });
  </script>
</body>
</html>
